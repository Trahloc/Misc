# File: src/zeroth_law/tool_mapping.yaml
# Zeroth Law Toolkit (zlt) Tool Mapping
# Maps zlt actions to underlying development tools and their arguments.

# === FORMAT ACTION ===
format:
  description: Formats code according to project style guides.

  zlt_options:
    verbose:
      type: flag
      description: Enable verbose output.
    quiet:
      type: flag
      description: Suppress non-error output.
    config:
      type: value
      value_type: path
      description: Path to configuration file.
    check:
      type: flag
      description: Run in check mode (don\'t modify files).
    paths:
      type: positional
      description: Files or directories to format.

  tools:
    ruff_format:
      command: ["ruff", "format"]
      maps_options:
        # verbose: Maps to ruff format -v / --verbose
        # Help: -v, --verbose / Enable verbose logging
        verbose: -v
        # quiet: Maps to ruff format -q / --quiet
        # Help: -q, --quiet / Print diagnostics, but nothing else
        quiet: -q
        # config: Maps to ruff format --config <CONFIG_OPTION>
        # Help: --config <CONFIG_OPTION> / Either a path to a TOML configuration file...
        config: --config
        # check: Maps to ruff format --check
        # Help: --check / Avoid writing any formatted files back...
        check: --check
        # paths: Tool accepts positional arguments for paths
        paths: null
    # black:
    #   command: black
    #   maps_options: {}
    #   # TODO: Fill based on 'black --help'

# === LINT ACTION ===
lint:
  description: Lints code for style and potential errors.

  zlt_options:
    verbose:
      type: flag
      description: Enable verbose output.
    quiet:
      type: flag
      description: Suppress non-error output.
    config:
      type: value
      value_type: path
      description: Path to configuration file.
    exit_zero:
      type: flag
      description: Exit with status code 0 even if issues are found.
    # fix: # Example of adding a lint-specific option later
    #   type: flag
    #   description: Attempt to automatically fix fixable violations.
    paths:
      type: positional
      # default: ["src", "tests"] # Example
      description: Files or directories to lint.

  tools:
    ruff_check:
      command: ["ruff", "check"]
      maps_options:
        # verbose: Maps to ruff check -v / --verbose
        # Help: -v, --verbose / Enable verbose logging
        verbose: -v
        # quiet: Maps to ruff check -q / --quiet
        # Help: -q, --quiet / Print diagnostics, but nothing else
        quiet: -q
        # config: Maps to ruff check --config <CONFIG_OPTION>
        # Help: --config <CONFIG_OPTION> / Either a path to a TOML configuration file...
        config: --config
        # exit_zero: Maps to ruff check -e / --exit-zero
        # Help: -e, --exit-zero / Exit with status code "0", even upon detecting lint violations
        exit_zero: --exit-zero
        # paths: Tool accepts positional arguments for paths
        paths: null
        # Note: zlt option 'fix' is not mapped here yet.
    # mypy:
    #   command: ["mypy"] # Example as list
    #   maps_options: {}
    #   # TODO: Fill based on 'mypy --help'

# === TEST ACTION ===
test:
  # TODO: Define zlt_options and tools/maps_options for test
  description: Runs automated tests.
  tools:
    pytest:
      command: ["pytest"]
      option_mappings: # Keep old structure temporarily
        paths: null
        verbose: -v
        quiet: -q
        k: -k
        m: -m
        x: -x

# === OTHER ACTIONS (Keep old structure temporarily) ===
coverage:
  description: Measures test coverage.
  tools:
    pytest_cov:
      command: ["pytest", "--cov"]
      option_mappings:
        paths: null
        verbose: -v
        quiet: -q

duplicate:
  description: Detects duplicate code.
  tools:
    pmd_cpd:
      command: ["pmd-cpd"]
      option_mappings:
        paths: --files

security:
  description: Scans code for security vulnerabilities.
  tools:
    bandit:
      command: ["bandit", "-r"]
      option_mappings:
        paths: null
        config: -c
        verbose: -v
        quiet: -q

fuzz:
  description: Runs fuzz tests to find unexpected behavior.
  tools:
    atheris: # Placeholder
      command: ["python", "your_fuzz_script.py"]
      option_mappings:
        paths: null
