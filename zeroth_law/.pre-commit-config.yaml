# /home/trahloc/code/Misc/.pre-commit-config.yaml
# Minimal root configuration for repo-wide checks (if any).
# The main logic for project-specific checks is handled by the
# custom .git/hooks/pre-commit script installed by `zeroth_law install-git-hook`.

repos:
-   repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: check-yaml
      - id: check-toml
        # Check root pyproject.toml if it exists and others if needed
        # Example: only check root pyproject.toml
        # files: "^pyproject.toml$"
        # Or exclude specific known non-project TOMLs
        # exclude: "(some_other_config.toml)"
      - id: end-of-file-fixer
      - id: trailing-whitespace

# Add other truly repo-wide checks here (e.g., check-merge-conflict).
# -   repo: https://github.com/pre-commit/pre-commit-hooks
#     rev: v4.5.0
#     hooks:
#       - id: check-merge-conflict

# Hook to prevent multi-project commits
-   repo: local
    hooks:
      - id: check-multi-project
        name: Check for multi-project commit
        entry: zeroth_law/scripts/check_multi_project_commit.py
        language: script # Use 'script' which just executes the entry
        types: [file] # Run on all file types
        pass_filenames: true # The script expects filenames as arguments
        # Run early to potentially short-circuit other hooks
        stages: [pre-commit] # Use modern stage name

# Add other repo-wide, non-project-specific hooks here if needed.
# For project-specific hooks (like ruff, mypy for zeroth_law),
# use `pre-commit run --config zeroth_law/.pre-commit-config.yaml ...`

# Optional: Add commitlint if you set it up
# -   repo: https://github.com/conventional-changelog/commitlint
#     rev: v18.6.0 # Check for latest version
#     hooks:
#       - id: commitlint
#         stages: [commit-msg]
#         additional_dependencies: ['@commitlint/config-conventional']

# Local hook to generate the CODE_TODOS.md dashboard
# -   repo: local
#     hooks:
#       - id: generate-todos
#         name: Generate CODE_TODOS.md
#         entry: zeroth_law/scripts/generate_code_todos.sh
#         language: system
#         pass_filenames: false
#         always_run: true # Run even if no Python files were staged (ensures dashboard is current)
#         verbose: true # Show output if the script prints anything (e.g., errors)

# --- Pylint Hook (Example - Often run separately due to slowness) ---
