# /home/trahloc/code/Misc/zeroth_law/.pre-commit-config.yaml
# Project-specific pre-commit configuration for zeroth_law
# This file is executed by the custom git hook script when changes
# are detected only within the zeroth_law/ directory.

# (No need for project_root definition here)

repos:
# Ruff - Linter & Formatter
-   repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.4.10 # Pin to a specific version
    hooks:
      - id: ruff
        # Use poetry run to ensure it uses the project environment and config
        entry: poetry run ruff check .
        language: system
        types: [python]
        pass_filenames: false # Let ruff find files based on config
        args: [] # Keep args empty, rely on pyproject.toml config
      - id: ruff-format
        # Use poetry run to ensure it uses the project environment and config
        entry: poetry run ruff format .
        language: system
        types: [python]
        pass_filenames: false # Let ruff find files based on config
        args: [] # Keep args empty, rely on pyproject.toml config

# MyPy - Static Typing
-   repo: local
    hooks:
      - id: mypy
        name: mypy (local project)
        language: system # Assumes mypy is installed in the env (via poetry)
        # Use poetry run; run from project root, finds pyproject.toml
        entry: poetry run mypy .
        types: [python]
        pass_filenames: false

# Pylint - Similarity Checks Only
-   repo: local
    hooks:
      - id: pylint-similarity
        name: pylint (similarities only - local project)
        language: system # Assumes pylint is installed in the env (via poetry)
        # Use poetry run; pass relevant args, including config. src/ and tests/ relative to CWD.
        entry: poetry run pylint --rcfile=pyproject.toml --disable=all --enable=R0801 src/ tests/
        types: [python]
        pass_filenames: false # Pylint finds files based on entry args

# Generate CODE_TODOS.md dashboard
-   repo: local
    hooks:
      - id: generate-todos
        name: Generate CODE_TODOS.md
        entry: zeroth_law/scripts/generate_code_todos.sh # Path relative to Git root
        language: system
        pass_filenames: false
        always_run: true
        verbose: true

# Removed redundant pre-commit-hooks (check-yaml, etc.) as they exist in root config.
# Removed misplaced check-multi-project hook as its logic is in the custom dispatcher script.
