# /home/trahloc/code/Misc/zeroth_law/.pre-commit-config.yaml
# Project-specific pre-commit configuration for zeroth_law
# This file is executed by the custom git hook script when changes
# are detected only within the zeroth_law/ directory.

# Define project root relative to this config file (which is already project root)
# (This might be useful for hooks needing explicit paths)
# project_root: .

repos:
# Ruff - Linter & Formatter
-   repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.4.10 # Pin to a specific version
    hooks:
      - id: ruff
        args: [] # NO --fix; rely on IDE/manual fixing before commit
      - id: ruff-format
        args: [] # Let it run and fail commit if files are modified

# MyPy - Static Typing
-   repo: local
    hooks:
      - id: mypy
        name: mypy (local project)
        language: system # Assumes mypy is installed in the env (via poetry)
        entry: mypy . # Run from project root, finds pyproject.toml
        types: [python]
        pass_filenames: false

# Pylint - Similarity Checks Only
-   repo: local
    hooks:
      - id: pylint-similarity
        name: pylint (similarities only - local project)
        language: system # Assumes pylint is installed in the env (via poetry)
        # Pass relevant args, including config. src/ and tests/ relative to CWD.
        entry: pylint --rcfile=pyproject.toml --disable=all --enable=R0801 src/ tests/
        types: [python]
        # files: ^(src|tests)/.*\.py$ # Filter files if needed, but entry limits scope
        pass_filenames: false # Pylint finds files based on entry args

# Generate CODE_TODOS.md dashboard
-   repo: local
    hooks:
      - id: generate-todos
        name: Generate CODE_TODOS.md
        entry: scripts/generate_code_todos.sh # Path relative to project root
        language: script # Use script runner
        pass_filenames: false
        always_run: true
        verbose: true
