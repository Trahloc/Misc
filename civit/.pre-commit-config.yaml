# trunk-ignore-all(prettier)
# FILE_LOCATION: https://github.com/Trahloc/Misc/blob/main/civit/.pre-commit-config.yaml.template
repos:
  - repo: https://github.com/psf/black
    rev: 23.1.0  # Use a specific, stable version.  VS Code has built-in Black support.
    hooks:
      - id: black
        # VS Code:  Enable "Format on Save" and configure Black as the formatter.
        # pre-commit: This acts as a final check before commit.

  - repo: https://github.com/PyCQA/flake8
    rev: 6.0.0  # Use a specific, stable version.
    hooks:
      - id: flake8
        # VS Code: Install the "Python" extension (by Microsoft).  It includes
        #          flake8 integration.  Configure flake8 settings in your VS Code
        #          settings.json (e.g., max-line-length, ignore codes).
        # pre-commit: This is a final check, ensuring consistent style.
        args: [--max-line-length=88, --ignore=E203,W503] # Example: Adjust as needed.

  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.0.0  # Use a specific, stable version.
    hooks:
      - id: mypy
        name: mypy (project-specific)
        language: system # Use project environment
        entry: uv run mypy . # Run via uv in project env
        types: [python]
        require_serial: true
        pass_filenames: false
        # additional_dependencies removed - should be in pyproject.toml dev deps

  - repo: https://github.com/pycqa/isort
    rev: 5.12.0  # Use a specific version
    hooks:
      - id: isort
        # VS Code: Install the "Python" extension (by Microsoft).  It includes
        #          isort integration. Configure isort settings in your VS Code
        #          settings.json
        # pre-commit: This is a final check, ensuring consistent import order

  - repo: local  # 'local' hooks run scripts within your repository.
    hooks:
      - id: autoinit
        name: Auto-generate __init__.py
        entry: uv run autoinit # Run via uv in project env
        language: system # Use project environment
        types: [python]
        require_serial: true
        pass_filenames: false
        # VS Code: No direct integration, but autoinit keeps __init__.py files up-to-date.

      # --- Pytest Hook (Temporarily Disabled) ---
      # TODO: Resolve environment/plugin issues running pytest via pre-commit.
      # Encountered problems activating the correct uv environment or finding
      # plugins like pytest-cov consistently within the pre-commit + uv run context.
      # Rely on manual runs (uv run pytest) or CI for test execution for now.
      # - id: pytest
      #   name: Run Tests with pytest
      #   entry: sh -c 'source .venv/bin/activate && pytest -v -x --cov=src --cov-report=xml' # Explicitly activate venv
      #   language: system # Keep using system
      #   pass_filenames: false
      #   always_run: true
      #   args: [] # Args are now part of the entry command
      #   types: [python]
      #   require_serial: true

      # - id: zeroth-law # Keep commented out or configure correctly later
      #   name: Zeroth Law Analyzer
        # entry: python -m {directory} # Replace with your actual script/module
        # language: python
        # files: \.py$  # Apply to all Python files.
        # args: [-r]   # Example: Pass arguments to your analyzer (-r for recursive).
        # VS Code:  You could create a VS Code extension to integrate the
        #          Zeroth Law Analyzer's output into the Problems panel.
        #          This is a more advanced topic.
        # pre-commit: This is where the *core* Zeroth Law rules are enforced.
